Changes in branch origin/master, between 58a9b94dfb130f670ffa8cee575d8ecd712d04ae and 50ffa95f63c100271e40fa11add3e440545db918
commit 50ffa95f63c100271e40fa11add3e440545db918
tree e8063a54389b20bca2d202de5decfad37580ecae
parent 58a9b94dfb130f670ffa8cee575d8ecd712d04ae
author Edison Su <sudison@gmail.com> 1343322618 -0700
committer Edison Su <sudison@gmail.com> 1343322618 -0700

    ifix CS-15609 Volumes can be created as a part of VM creation when
    un-allocated space is insufficient on primary storage
    
    check the availability of un-allocated primary storage space during
    planning stage, for multiple-volume VM creation scenario
    modification in StorageManagerImpl.java and StorageManager.java:
    add a new method storagePoolHasEnoughSpace(List<Volumes>, StoragePool),
    check if storagePool has enough space for all requested volumes
    modification in FirstfitPlanner.findPotentialDeploymentResources:
    handle multiple volume case, keep track of allocated volumes for pools
    and call storagePoolHasEnoughSpace to check space availability
    modification in AbstractStoragePoolAllocator.java:
    extract capacity computation logic and make a new method in
    StorageManagerImpl
    
    RB: https://reviews.apache.org/r/6028/
    Send-by: mice_xia@tcloudcomputing.com

:100755 100755 eb82c75d8231a3fac182505c333b8f82b4bc171f e70ea4de308e47741b07c8defc1179ea5e6b85a7 M	server/src/com/cloud/deploy/FirstFitPlanner.java
:100755 100755 67ad97c204b6f47efb68240f4337121dfe43ce2d 59a02210d867240b6c03bd22bc31f798f2e6fc5d M	server/src/com/cloud/storage/StorageManager.java
:100755 100755 d94bada2866bb00b357a24b1eb135119da0b4435 ed9df3069ffcc31cdde0084cd022624234289fe1 M	server/src/com/cloud/storage/StorageManagerImpl.java
:100755 100755 0a0f66ebc420c28cf1815ba094b5e5f7a740222f 87cb065e2854dd0302bafa23b983fd5a29a957a3 M	server/src/com/cloud/storage/allocator/AbstractStoragePoolAllocator.java
